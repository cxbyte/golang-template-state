Example of State pattern on golang